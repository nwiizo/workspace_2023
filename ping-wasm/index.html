<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>HTTP Ping</title>
  <script src="wasm_exec.js"></script>
  <script>
    async function init() {
      const go = new Go();
      const result = await WebAssembly.instantiateStreaming(fetch("http_ping.wasm"), go.importObject);
      go.run(result.instance);
    }
    init();

    function ping() {
      const url = document.getElementById("url").value;
      window.ping(url, (resultJson) => {
        const result = JSON.parse(resultJson);
        const output = document.getElementById("output");
        output.innerHTML = `URL: ${result.url}<br>Latency: ${result.latency} ms<br>Status Code: ${result.status_code}<br>Error: ${result.error}`;
      });
    }
  </script>
</head>

<body>
  <h1>HTTP Ping</h1>
  <input type="text" id="url" placeholder="Enter URL">
  <button onclick="ping()">Ping</button>
  <div id="output"></div>
</body>

</html>
